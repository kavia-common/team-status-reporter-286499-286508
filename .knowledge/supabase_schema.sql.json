{"is_source_file": true, "format": "SQL", "description": "This file defines the PostgreSQL database schema for the Team Status Reporter application, including extensions, custom ENUM types, core tables, indexes, triggers, stored functions, and policies for row-level security. It is responsible for setting up the data structure, relationships, and access controls for the project.", "external_files": ["pgcrypto extension", "uuid-ossp extension"], "external_methods": ["gen_random_uuid()", "auth.uid()", "auth.email()", "public.fn_is_team_manager(uuid)", "public.fn_is_team_admin(uuid)", "public.fn_sync_app_user()"], "published": ["public.app_users", "public.teams", "public.team_memberships", "public.weekly_reports", "public.ai_summaries", "public.exports", "public.activity_logs"], "classes": [], "methods": [{"name": "public.fn_set_updated_at()", "description": "Trigger function to automatically update the 'updated_at' timestamp before any update on certain tables."}, {"name": "public.fn_is_team_manager(uuid)", "description": "Checks if the current user has a 'manager' or 'admin' role in a specific team."}, {"name": "public.fn_is_team_admin(uuid)", "description": "Checks if the current user has an 'admin' role in a specific team."}, {"name": "public.fn_sync_app_user()", "description": "Syncs the authenticated user's info with the 'app_users' table, inserting or updating as necessary."}], "calls": ["public.fn_is_team_manager(teams.id)", "public.fn_is_team_admin(teams.id)", "public.fn_sync_app_user()", "public.fn_set_updated_at()"], "search-terms": ["schema.sql", "PostgreSQL schema", "row level security policies", "extending ENUM types", "automatic timestamps", "team membership roles", "user synchronization", "Supabase policies", "database triggers", "idempotent schema setup"], "state": 2, "file_id": 5, "knowledge_revision": 11, "git_revision": "54cba610c9f9d0f4d8bfca1a678292c21d3b9882", "hash": "4253edfc1cf858bf1fb304ddd2fde72f", "format-version": 4, "code-base-name": "fastapi_backend", "filename": "supabase/schema.sql", "revision_history": [{"11": "54cba610c9f9d0f4d8bfca1a678292c21d3b9882"}]}